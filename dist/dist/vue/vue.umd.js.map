{"version":3,"file":"vue.umd.js","sources":["../../src/utils/api-loader.ts","../../src/utils/config.ts","../../src/utils/ueditor-loader.ts","../../src/utils/iframe-styles.ts","../../src/core/DesignerCore.ts","../../src/composables/useMaterial.ts","../../src/utils/style-processor.ts","../../src/composables/useSection.ts","../../src/composables/useSectionActions.ts","../../src/components/MaterialPanel.vue","../../src/components/icons/IconClose.vue","../../src/components/SectionTools.vue","../../src/components/icons/IconCheck.vue","../../src/components/Designer.vue"],"sourcesContent":["import type {MaterialQueryParams, MaterialCategory, MaterialItem, StyleListData} from '../types'\n\n/**\n * API response interfaces for external API\n */\ninterface CategoryAPIResponse {\n    code: number\n    msg: string\n    data: {\n        tree: RawCategory[]\n    }\n}\n\ninterface MaterialAPIResponse {\n    code: number\n    msg: string\n    data: {\n        page: number\n        pageSize: number\n        total: number\n        records: RawMaterial[]\n    }\n}\n\ninterface RawCategory {\n    id: number\n    created_at: string\n    updated_at: string\n    pid: number\n    sort: number | null\n    title: string\n    _child?: RawCategory[]\n}\n\ninterface RawMaterial {\n    id: number\n    title: string\n    tags?: string[]\n    html: string\n\n    [key: string]: any\n}\n\n/**\n * Default API base URL\n */\nconst API_BASE_URL = 'https://paiban.tecmz.com/api/live_rich_editor'\n\n/**\n * Fetch categories from API\n */\nexport async function fetchCategories(): Promise<MaterialCategory[]> {\n    try {\n        const response = await fetch(`${API_BASE_URL}/categories`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: '{}'\n        })\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`)\n        }\n\n        const result: CategoryAPIResponse = await response.json()\n\n        if (result.code !== 0 || !result.data?.tree) {\n            throw new Error(result.msg || 'Failed to fetch categories')\n        }\n\n        // Convert raw category data to MaterialCategory format\n        return convertCategories(result.data.tree)\n    } catch (error) {\n        console.error('Failed to fetch categories:', error)\n        return []\n    }\n}\n\n/**\n * Convert raw category data to MaterialCategory format\n */\nfunction convertCategories(raw: RawCategory[]): MaterialCategory[] {\n    return raw.map(item => ({\n        id: item.id,\n        title: item.title,\n        pid: item.pid,\n        sort: item.sort || 0,\n        _child: item._child ? convertCategories(item._child) : undefined\n    }))\n}\n\n/**\n * Fetch materials from API with pagination and filters\n */\nexport async function fetchMaterials(params?: MaterialQueryParams): Promise<MaterialAPIResponse['data']> {\n    try {\n        // Build request body for POST request\n        const requestBody: any = {\n            paginate: {\n                page: params?.page || 1,\n                pageSize: params?.pageSize || 100,\n                search: {}\n            }\n        }\n\n        if (params?.categoryId) {\n            requestBody.paginate.search.categoryId = params.categoryId\n        }\n\n        if (params?.keywords) {\n            requestBody.paginate.search.keywords = params.keywords\n        }\n\n        const response = await fetch(`${API_BASE_URL}/paginate`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(requestBody)\n        })\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`)\n        }\n\n        const result: MaterialAPIResponse = await response.json()\n\n        if (result.code !== 0 || !result.data) {\n            throw new Error(result.msg || 'Failed to fetch materials')\n        }\n\n        return result.data\n    } catch (error) {\n        console.error('Failed to fetch materials:', error)\n        return {\n            page: 1,\n            pageSize: params?.pageSize || 10,\n            total: 0,\n            records: []\n        }\n    }\n}\n\n/**\n * Convert raw material data to MaterialItem format\n */\nfunction convertMaterials(raw: RawMaterial[]): MaterialItem[] {\n    return raw.map(item => ({\n        ...item,\n        id: item.id,\n        title: item.title,\n        html: item.html\n    }))\n}\n\n/**\n * Default category loader function\n * Fetches only categories\n */\nexport async function defaultCategoryLoader(): Promise<MaterialCategory[]> {\n    try {\n        return await fetchCategories()\n    } catch (error) {\n        console.error('Default category loader error:', error)\n        return []\n    }\n}\n\n/**\n * Default style loader function\n * Fetches materials based on query parameters\n */\nexport async function defaultStyleLoader(params?: MaterialQueryParams): Promise<StyleListData> {\n    try {\n        const materialsData = await fetchMaterials(params)\n\n        return {\n            records: convertMaterials(materialsData.records),\n            total: materialsData.total,\n            page: materialsData.page,\n            pageSize: materialsData.pageSize\n        }\n    } catch (error) {\n        console.error('Default style loader error:', error)\n        return {\n            records: [],\n            total: 0,\n            page: 1,\n            pageSize: params?.pageSize || 100\n        }\n    }\n}\n\n","import {defaultCategoryLoader, defaultStyleLoader } from './api-loader'\n\n/**\n * 编辑器配置常量\n */\nexport const Config = {\n    /** Section样式类名 */\n    SectionClass: 'pb-section',\n\n    /** Section激活状态类名 */\n    SectionActiveClass: 'pb-section-active',\n\n    /** Section悬停状态类名 */\n    SectionHoverClass: 'pb-section-hover',\n\n    /** 默认UEditor路径 */\n    DefaultUEditorPath: '/ueditor-plus',\n\n    /** 默认编辑器宽度 */\n    DefaultWidth: '100%',\n\n    /** 默认编辑器高度 */\n    DefaultHeight: 600,\n\n    /** 默认启用自动布局 */\n    DefaultAutoLayout: true,\n\n    /** 默认分类加载器 */\n    DefaultCategoryLoader: defaultCategoryLoader,\n\n    /** 默认素材列表加载器 */\n    DefaultStyleLoader: defaultStyleLoader,\n}\n\n\n/**\n * 默认UEditor工具栏配置\n */\nexport const DefaultUEditorPlusToolbars = [\n    [\n        \"source\",\n        \"|\",\n        \"undo\",\n        \"redo\",\n        \"|\",\n        \"bold\",\n        \"italic\",\n        \"underline\",\n        \"fontborder\",\n        \"strikethrough\",\n        \"superscript\",\n        \"subscript\",\n        \"removeformat\",\n        \"formatmatch\",\n        \"autotypeset\",\n        \"blockquote\",\n        \"pasteplain\",\n        \"|\",\n        \"forecolor\",\n        \"backcolor\",\n        \"insertorderedlist\",\n        \"insertunorderedlist\",\n        \"selectall\",\n        \"cleardoc\",\n        \"|\",\n        \"rowspacingtop\",\n        \"rowspacingbottom\",\n        \"lineheight\",\n        \"|\",\n        \"customstyle\",\n        \"paragraph\",\n        \"fontfamily\",\n        \"fontsize\",\n        \"|\",\n        \"directionalityltr\",\n        \"directionalityrtl\",\n        \"indent\",\n        \"|\",\n        \"justifyleft\",\n        \"justifycenter\",\n        \"justifyright\",\n        \"justifyjustify\",\n        \"|\",\n        \"touppercase\",\n        \"tolowercase\",\n        \"|\",\n        \"link\",\n        \"unlink\",\n        \"anchor\",\n        \"|\",\n        \"imagenone\",\n        \"imageleft\",\n        \"imageright\",\n        \"imagecenter\",\n        \"|\",\n        \"insertimage\",\n        \"emotion\",\n        \"scrawl\",\n        \"insertvideo\",\n        \"attachment\",\n        \"map\",\n        \"insertframe\",\n        \"insertcode\",\n        \"pagebreak\",\n        \"template\",\n        \"background\",\n        \"|\",\n        \"horizontal\",\n        \"date\",\n        \"time\",\n        \"spechars\",\n        \"wordimage\",\n        \"|\",\n        \"inserttable\",\n        \"deletetable\",\n        \"insertparagraphbeforetable\",\n        \"insertrow\",\n        \"deleterow\",\n        \"insertcol\",\n        \"deletecol\",\n        \"mergecells\",\n        \"mergeright\",\n        \"mergedown\",\n        \"splittocells\",\n        \"splittorows\",\n        \"splittocols\",\n        \"|\",\n        \"print\",\n        \"preview\",\n        \"searchreplace\",\n        'shortcutmenu',\n    ]\n]\n","/**\n * UEditor动态加载器\n */\n\n// 声明全局UEditor\ndeclare global {\n  interface Window {\n    UE?: any\n    UEDITOR_HOME_URL?: string\n  }\n}\n\nlet isLoading = false\nlet isLoaded = false\nconst loadCallbacks: Array<() => void> = []\n\n/**\n * 加载UEditor脚本\n */\nexport function loadUEditor(ueditorPath: string = '/ueditor-plus'): Promise<any> {\n\n  return new Promise((resolve, reject) => {\n    // 已加载\n    if (isLoaded && window.UE) {\n      resolve(window.UE)\n      return\n    }\n\n    // 正在加载中，添加到回调队列\n    if (isLoading) {\n      loadCallbacks.push(() => resolve(window.UE))\n      return\n    }\n\n    isLoading = true\n\n    // 设置UEditor基础路径\n    const basePath = ueditorPath.endsWith('/') ? ueditorPath : `${ueditorPath}/`\n    window.UEDITOR_HOME_URL = basePath\n\n    // 加载配置文件\n    const configScript = document.createElement('script')\n    configScript.src = `${basePath}ueditor.config.js`\n    configScript.onload = () => {\n      // 加载主文件\n      const mainScript = document.createElement('script')\n      mainScript.src = `${basePath}ueditor.all.js`\n      mainScript.onload = () => {\n        isLoaded = true\n        isLoading = false\n        \n        // 执行所有回调\n        loadCallbacks.forEach(cb => cb())\n        loadCallbacks.length = 0\n        \n        resolve(window.UE)\n      }\n      mainScript.onerror = () => {\n        isLoading = false\n        reject(new Error('Failed to load UEditor main script'))\n      }\n      document.head.appendChild(mainScript)\n    }\n    configScript.onerror = () => {\n      isLoading = false\n      reject(new Error('Failed to load UEditor config script'))\n    }\n    document.head.appendChild(configScript)\n  })\n}\n\n/**\n * 检查UEditor是否已加载\n */\nexport function isUEditorLoaded(): boolean {\n  return isLoaded && !!window.UE\n}\n\n/**\n * 获取UEditor实例（如果已加载）\n */\nexport function getUEditor(): any {\n  return window.UE\n}\n","/**\n * UEditor编辑器iframe内部样式\n * 这个样式会被注入到UEditor的iframe中\n */\nexport const DefaultIframeStyles = `\n/* Section基础样式 */\nsection.pb-section {\n  position: relative;\n  margin: 10px auto;\n  padding: 0;\n  transition: all 0.2s;\n  cursor: pointer;\n  min-height: 20px;\n}\n\n/* Section激活状态 */\nsection.pb-section.pb-section-active {\n  outline: 2px dashed rgba(255, 0, 0, 0.4);\n  outline-offset: 2px;\n}\n\n/* 子Section悬停状态 */\nsection.pb-section .pb-section-hover {\n  outline: 1px dashed rgba(0, 0, 255, 0.3);\n  outline-offset: 1px;\n}\n\n/* 子Section激活状态 */\nsection.pb-section .pb-section-active {\n  outline: 1px dashed rgba(0, 0, 255, 0.5);\n  outline-offset: 1px;\n}\n\n/* 子Section样式 */\nsection:not(.pb-section) {\n  position: relative;\n  transition: all 0.2s;\n}\n\nsection:not(.pb-section).pb-section-hover {\n  outline: 1px dashed rgba(0, 0, 255, 0.3);\n  outline-offset: 1px;\n}\n\n/* 图片样式增强 */\nsection.pb-section img {\n  max-width: 100%;\n  height: auto;\n  display: block;\n  transition: all 0.2s;\n}\n\nsection.pb-section img:hover {\n  opacity: 0.9;\n  cursor: pointer;\n}\n\n/* 表格样式优化 */\nsection.pb-section table {\n  border-collapse: collapse;\n  width: 100%;\n  margin: 10px 0;\n}\n\nsection.pb-section table td,\nsection.pb-section table th {\n  border: 1px solid #ddd;\n  padding: 8px;\n}\n\nsection.pb-section table th {\n  background: #f5f5f5;\n  font-weight: bold;\n}\n\n/* 防止内容溢出 */\nsection.pb-section {\n  overflow: hidden;\n  word-wrap: break-word;\n}\n\n/* 空Section提示 */\nsection.pb-section:empty::before {\n  content: '空内容块 - 点击编辑';\n  color: #999;\n  font-size: 14px;\n}\n`\n","import type {\n    DesignerConfig,\n    DesignerInstance,\n    MaterialCategory,\n    StyleListData,\n    MaterialQueryParams,\n    UEditorConfig\n} from '../types'\nimport {Config, DefaultUEditorPlusToolbars} from '../utils/config'\nimport {loadUEditor} from '../utils/ueditor-loader'\nimport {DefaultIframeStyles} from '../utils/iframe-styles'\n\n/**\n * Internal config type with all properties required\n */\ninterface InternalConfig {\n    container: HTMLElement | string\n    ueditorPath: string\n    ueditorConfig: UEditorConfig\n    categoryLoader: () => Promise<MaterialCategory[]>\n    styleLoader: (params?: MaterialQueryParams) => Promise<StyleListData>\n    onReady: () => void\n    onChange: (content: string) => void\n}\n\n/**\n * 编辑器核心类 - 框架无关的纯JS实现\n */\nexport class DesignerCore implements DesignerInstance {\n    private config: InternalConfig\n    private container: HTMLElement | null = null\n    private editor: any = null\n    private editorId: string\n    private eventHandlers: Map<string, Function[]> = new Map()\n    private resizeHandler: (() => void) | null = null\n    private editorElement: HTMLElement | null = null\n\n    constructor(config: DesignerConfig) {\n        // Initialize ueditorConfig if not provided\n        const ueditorConfig = config.ueditorConfig || {}\n        if (!ueditorConfig.iframeCssStylesAddition) {\n            ueditorConfig.iframeCssStylesAddition = []\n        }\n        ueditorConfig.iframeCssStylesAddition = [\n            DefaultIframeStyles,\n            ...ueditorConfig.iframeCssStylesAddition\n        ]\n        if (!ueditorConfig.toolbars) {\n            ueditorConfig.toolbars = DefaultUEditorPlusToolbars\n        }\n        ueditorConfig.toolbars[ueditorConfig.toolbars.length - 1].push('liveeditor')\n\n        // Get loaders with backward compatibility\n        let categoryLoader = config.categoryLoader || Config.DefaultCategoryLoader\n        let styleLoader = config.styleLoader || Config.DefaultStyleLoader\n\n        // 合并默认配置\n        this.config = {\n            container: config.container || '#editor',\n            ueditorPath: config.ueditorPath || '/ueditor-plus',\n            ueditorConfig,\n            categoryLoader,\n            styleLoader,\n            onReady: config.onReady || (() => {\n            }),\n            onChange: config.onChange || (() => {\n            }),\n        }\n\n        // 生成唯一ID\n        this.editorId = `ueditorPlusDesigner_${Date.now()}`\n    }\n\n    /**\n     * 初始化编辑器\n     */\n    async init(): Promise<void> {\n        // 获取容器\n        if (typeof this.config.container === 'string') {\n            this.container = document.querySelector(this.config.container)\n        } else {\n            this.container = this.config.container as HTMLElement\n        }\n\n        if (!this.container) {\n            throw new Error('Container not found')\n        }\n        // 加载UEditor\n        await loadUEditor(this.config.ueditorPath)\n        const UE = (window as any).UE\n\n        if (!UE) {\n            throw new Error('UEditor failed to load')\n        }\n\n        // 创建编辑器容器\n        const editorContainer = document.createElement('div')\n        editorContainer.id = this.editorId\n        this.container.appendChild(editorContainer)\n\n        // 保存编辑器元素引用\n        this.editorElement = editorContainer\n\n        // IMPORTANT: 注册UI插件必须在 UE.getEditor() 调用前执行\n        this.registerUIPlugin()\n\n        // 配置UEditor\n        const editorConfig: any = {\n            autoHeightEnabled: false,\n            initialFrameWidth: '100%',\n            ...this.config.ueditorConfig,\n        }\n\n        // 创建编辑器实例\n        this.editor = UE.getEditor(this.editorId, editorConfig)\n\n        // 等待编辑器就绪\n        this.editor.ready(() => {\n            // 设置resize监听\n            this.setupResizeListener()\n            // 初始布局\n            this.doLayout()\n\n            this.config.onReady()\n            this.emit('ready')\n        })\n\n        // 监听内容变化\n        this.editor.addListener('contentChange', () => {\n            const content = this.getContent()\n            this.config.onChange(content)\n            this.emit('change', content)\n        })\n    }\n\n    /**\n     * 注册UI插件 - 必须在 UE.getEditor() 调用前执行\n     */\n    private registerUIPlugin(): void {\n        const UE = (window as any).UE\n\n        // 注册自定义插件\n        UE.registerUI('liveeditor', (editor: any, _uiName: string) => {\n            // Section点击事件\n            editor.on('click', (_t: any, evt: Event) => {\n                const el = evt.target as HTMLElement\n                const section = el.closest(`.${Config.SectionClass}`) as HTMLElement\n\n                // 不在section中的点击全部忽略\n                if (!section) {\n                    return\n                }\n\n                // 获取编辑器文档对象\n                const editorDocument = editor.document\n\n                // 高亮显示Section - 移除其他Section的激活状态\n                const allSections = editorDocument.querySelectorAll(`.${Config.SectionClass}`)\n                allSections.forEach((s: Element) => {\n                    s.classList.remove(Config.SectionActiveClass)\n                })\n                section.classList.add(Config.SectionActiveClass)\n\n                // 选中文字时不显示工具面板\n                if (editor.selection.getText()) {\n                    return\n                }\n\n                // 检查是否点击了图片\n                let clickedImage: HTMLElement | null = null\n                const closeNode = editor.selection.getRange().getClosedNode()\n                if (closeNode && closeNode.tagName && closeNode.tagName.toLowerCase() === 'img') {\n                    clickedImage = closeNode as HTMLElement\n                }\n\n                this.emit('section-click', {section, element: el, image: clickedImage})\n            })\n\n            // Section悬停事件\n            editor.addListener('mouseover mouseout', (t: string, evt: Event) => {\n                const el = evt.target as HTMLElement\n\n                // 移除所有子Section的悬停状态\n                const allSubSections = editor.document.querySelectorAll(`section:not(.${Config.SectionClass})`)\n                allSubSections.forEach((s: Element) => {\n                    s.classList.remove(Config.SectionHoverClass)\n                })\n\n                // 高亮显示子Section\n                if (!el.classList.contains(Config.SectionClass)) {\n                    const subSection = el.closest(`section:not(.${Config.SectionClass})`)\n                    if (t === 'mouseover' && subSection) {\n                        subSection.classList.add(Config.SectionHoverClass)\n                    }\n                }\n            })\n        })\n    }\n\n    /**\n     * 获取内容\n     */\n    getContent(): string {\n        return this.editor?.getContent() || ''\n    }\n\n    /**\n     * 设置内容\n     */\n    setContent(content: string): void {\n        this.editor?.setContent(content)\n    }\n\n    /**\n     * 插入Section\n     */\n    insertSection(html: string, options?: any): void {\n        if (!this.editor) return\n\n        const sectionId = options?.id || ''\n        const sectionHtml = `<section class=\"${Config.SectionClass} ${Config.SectionActiveClass}\" data-section-id=\"${sectionId}\">${html}</section>`\n\n        this.editor.execCommand('insertHtml', sectionHtml)\n    }\n\n    /**\n     * 布局调整 - 自适应高度\n     */\n    public doLayout(): void {\n\n        if (!this.container || !this.editor || !this.editorElement) return\n\n        const containerHeight = this.container.clientHeight\n\n        // 获取工具栏高度\n        const toolbarElement = this.editorElement.querySelector('.edui-editor-toolbarbox') as HTMLElement\n        const toolbarHeight = toolbarElement ? toolbarElement.offsetHeight : 0\n\n        // 计算可用高度\n        const availableHeight = containerHeight - toolbarHeight\n\n        // 设置宽度和高度\n        // this.editor.setWidth(containerWidth)\n        this.editor.setHeight(Math.max(availableHeight, 100)) // 最小高度100px\n    }\n\n    /**\n     * 设置resize监听器\n     */\n    private setupResizeListener(): void {\n        // 防抖函数\n        let resizeTimer: number | null = null\n\n        this.resizeHandler = () => {\n            if (resizeTimer !== null) {\n                window.clearTimeout(resizeTimer)\n            }\n            resizeTimer = window.setTimeout(() => {\n                this.doLayout()\n            }, 150) // 150ms防抖延迟\n        }\n\n        window.addEventListener('resize', this.resizeHandler)\n    }\n\n    /**\n     * 销毁编辑器\n     */\n    destroy(): void {\n        // 移除resize监听\n        if (this.resizeHandler) {\n            window.removeEventListener('resize', this.resizeHandler)\n            this.resizeHandler = null\n        }\n\n        this.editor?.destroy()\n        this.editor = null\n        this.eventHandlers.clear()\n    }\n\n    /**\n     * 事件监听\n     */\n    on(event: string, callback: Function): void {\n        if (!this.eventHandlers.has(event)) {\n            this.eventHandlers.set(event, [])\n        }\n        this.eventHandlers.get(event)!.push(callback)\n    }\n\n    /**\n     * 移除事件监听\n     */\n    off(event: string, callback?: Function): void {\n        if (!callback) {\n            this.eventHandlers.delete(event)\n            return\n        }\n\n        const handlers = this.eventHandlers.get(event)\n        if (handlers) {\n            const index = handlers.indexOf(callback)\n            if (index > -1) {\n                handlers.splice(index, 1)\n            }\n        }\n    }\n\n    /**\n     * 触发事件\n     */\n    private emit(event: string, ...args: any[]): void {\n        const handlers = this.eventHandlers.get(event)\n        if (handlers) {\n            handlers.forEach(handler => handler(...args))\n        }\n    }\n\n    /**\n     * 获取编辑器实例（UEditor原生实例）\n     */\n    getEditor(): any {\n        return this.editor\n    }\n}\n","import {ref, onMounted} from 'vue'\nimport type {MaterialCategory, MaterialItem, MaterialQueryParams, DesignerConfig} from '../types'\nimport {Config} from '../utils/config'\n\n/**\n * 素材管理 Composable\n */\nexport function useMaterial(config: DesignerConfig) {\n    const categories = ref<MaterialCategory[]>([])\n    const materials = ref<MaterialItem[]>([])\n    const total = ref(0)\n\n    const loading = ref(false)\n    const loadingMore = ref(false)\n    const loadingCategories = ref(false)\n\n    const currentCategory = ref<number | string>(0)\n    const keywords = ref('')\n    const currentPage = ref(1)\n    const pageSize = ref(100)\n    const hasMore = ref(true)\n\n    /**\n     * 获取分类加载器\n     */\n    const getCategoryLoader = () => {\n        if (config.categoryLoader) {\n            return config.categoryLoader\n        }\n\n        return Config.DefaultCategoryLoader\n    }\n\n    /**\n     * 获取素材加载器\n     */\n    const getStyleLoader = () => {\n        if (config.styleLoader) {\n            return config.styleLoader\n        }\n\n        return Config.DefaultStyleLoader\n    }\n\n    /**\n     * 加载分类数据（只在初始化时调用一次）\n     */\n    const loadCategories = async () => {\n        const loader = getCategoryLoader()\n        if (!loader) return\n\n        loadingCategories.value = true\n        try {\n            categories.value = await loader()\n        } catch (error) {\n            console.error('Failed to load categories:', error)\n            categories.value = []\n        } finally {\n            loadingCategories.value = false\n        }\n    }\n\n    /**\n     * 加载素材数据\n     */\n    const loadMaterials = async (params?: MaterialQueryParams, append = false) => {\n        const loader = getStyleLoader()\n        if (!loader) return\n\n        if (append) {\n            loadingMore.value = true\n        } else {\n            loading.value = true\n        }\n\n        try {\n            const data = await loader({\n                categoryId: currentCategory.value,\n                keywords: keywords.value,\n                page: currentPage.value,\n                pageSize: pageSize.value,\n                ...params\n            })\n\n            if (append) {\n                // Append mode: add to existing records\n                materials.value = [...materials.value, ...data.records]\n            } else {\n                // Replace mode: replace all records\n                materials.value = data.records\n            }\n\n            total.value = data.total\n            pageSize.value = data.pageSize\n\n            // Check if there are more pages\n            const totalPages = Math.ceil(data.total / pageSize.value)\n            hasMore.value = currentPage.value < totalPages\n\n        } catch (error) {\n            console.error('Failed to load materials:', error)\n            if (!append) {\n                materials.value = []\n                total.value = 0\n                hasMore.value = false\n            }\n        } finally {\n            if (append) {\n                loadingMore.value = false\n            } else {\n                loading.value = false\n            }\n        }\n    }\n\n    /**\n     * 加载更多素材（下一页）\n     */\n    const loadMore = async () => {\n        if (loadingMore.value || !hasMore.value) return\n\n        currentPage.value++\n        await loadMaterials(undefined, true)\n    }\n\n    /**\n     * 切换分类\n     */\n    const changeCategory = (categoryId: number | string) => {\n        currentCategory.value = categoryId\n        currentPage.value = 1\n        hasMore.value = true\n        loadMaterials()\n    }\n\n    /**\n     * 搜索\n     */\n    const search = (keyword: string) => {\n        keywords.value = keyword\n        currentPage.value = 1\n        hasMore.value = true\n        loadMaterials()\n    }\n\n    // 初始加载\n    onMounted(async () => {\n        // Load categories first (only once)\n        await loadCategories()\n        // Then load materials\n        await loadMaterials()\n    })\n\n    return {\n        // Data\n        categories,\n        materials,\n        total,\n\n        // Loading states\n        loading,\n        loadingMore,\n        loadingCategories,\n\n        // Filter states\n        currentCategory,\n        keywords,\n        currentPage,\n        hasMore,\n\n        // Methods\n        loadMaterials,\n        loadMore,\n        changeCategory,\n        search\n    }\n}\n","/**\n * 样式处理器 - 用于处理DOM元素的内联样式\n */\nclass Processor {\n  private element: HTMLElement | null = null\n  private styles: Record<string, string> = {}\n\n  // CSS前缀\n  private static readonly prefixes = ['-moz-', '-o-', '-webkit-', '-ms-']\n\n  /**\n   * 绑定DOM元素并解析样式\n   */\n  dom(element: HTMLElement): this {\n    this.element = element\n    this.parse()\n    return this\n  }\n\n  /**\n   * 解析元素的style属性\n   */\n  private parse(): this {\n    this.styles = {}\n    if (!this.element) return this\n\n    const styleAttr = this.element.getAttribute('style')\n    if (styleAttr) {\n      const pairs = styleAttr.split(';')\n      for (const pair of pairs) {\n        if (!pair.trim()) continue\n\n        const [key, value] = pair.split(':').map(s => s.trim())\n        if (key && value) {\n          this.styles[key] = value\n        }\n      }\n    }\n    return this\n  }\n\n  /**\n   * 移除样式属性\n   */\n  remove(key: string): this {\n    if (key in this.styles) {\n      delete this.styles[key]\n    }\n    return this\n  }\n\n  /**\n   * 移除DOM属性\n   */\n  removeDomAttr(attrName: string): this {\n    this.element?.removeAttribute(attrName)\n    return this\n  }\n\n  /**\n   * 获取带前缀的样式键名\n   */\n  private getStyleKeys(key: string): string[] {\n    const foundKeys: string[] = []\n    for (const prefix of Processor.prefixes) {\n      const prefixedKey = `${prefix}${key}`\n      if (prefixedKey in this.styles) {\n        foundKeys.push(prefixedKey)\n        break\n      }\n    }\n    return foundKeys.length ? foundKeys : [key]\n  }\n\n  /**\n   * 设置样式值（支持回调处理）\n   */\n  private setStyleValues(key: string, valueCb: (oldValue: string) => string): void {\n    const keys = this.getStyleKeys(key)\n    if (!keys.length) {\n      this.styles[key] = valueCb('')\n    } else {\n      for (const k of keys) {\n        const oldValue = this.styles[k] || ''\n        this.styles[k] = valueCb(oldValue)\n      }\n    }\n  }\n\n  /**\n   * 合并样式\n   */\n  merge(key: string, value: string | number): this {\n    if (key === 'rotatez') {\n      // 处理旋转变换\n      const transform = `rotatez(${value}deg)`\n      this.setStyleValues('transform', (v) => {\n        if (/rotatez\\(.*?\\)/.test(v)) {\n          return v.replace(/rotatez\\(.*?\\)/, transform)\n        } else {\n          return v ? `${v} ${transform}` : transform\n        }\n      })\n    } else {\n      // 普通样式\n      this.styles[key] = String(value)\n      \n      // 处理带前缀的样式\n      for (const prefix of Processor.prefixes) {\n        const prefixedKey = `${prefix}${key}`\n        if (prefixedKey in this.styles) {\n          this.styles[prefixedKey] = String(value)\n        }\n      }\n    }\n    return this\n  }\n\n  /**\n   * 获取样式值\n   */\n  get(key: string, defaultValue: any = null): any {\n    if (!this.element) return defaultValue\n\n    switch (key) {\n      case 'opacity': {\n        let value = this.element.style.opacity\n        if (!value) {\n          // 尝试带前缀的版本\n          for (const prefix of Processor.prefixes) {\n            const prefixedKey = `${prefix}${key}`\n            if (prefixedKey in this.styles) {\n              value = this.styles[prefixedKey]\n              break\n            }\n          }\n        }\n        return value ? parseFloat(value) : defaultValue\n      }\n\n      case 'rotatez': {\n        const transform = this.element.style.transform || ''\n        let rotateZ = 0\n\n        if (transform.toLowerCase().indexOf('rotatez(') >= 0) {\n          const match = transform.toLowerCase()\n            .replace(/rotatex\\s*\\(\\s*[0-9\\-]*\\s*deg\\s*\\)/g, '')\n            .replace(/rotatey\\s*\\(\\s*[0-9\\-]*\\s*deg\\s*\\)/g, '')\n            .match(/rotatez\\s*\\(\\s*([0-9\\-]+)\\s*deg\\s*\\)/)\n          \n          if (match) {\n            rotateZ = parseInt(match[1])\n            // 标准化角度到 -180~180\n            if (rotateZ > 180) {\n              rotateZ -= 360\n            } else if (rotateZ < -180) {\n              rotateZ += 360\n            }\n          }\n        }\n        return rotateZ\n      }\n\n      default:\n        return this.styles[key] || defaultValue\n    }\n  }\n\n  /**\n   * 将样式应用到DOM元素\n   */\n  toDom(): this {\n    if (!this.element) return this\n\n    const styleArray: string[] = []\n    for (const key in this.styles) {\n      styleArray.push(`${key}:${this.styles[key]}`)\n    }\n\n    if (styleArray.length) {\n      this.element.setAttribute('style', styleArray.join(';'))\n    } else {\n      this.element.removeAttribute('style')\n    }\n    return this\n  }\n}\n\n/**\n * 样式处理器工厂\n */\nexport const StyleProcessor = {\n  /**\n   * 从DOM元素创建处理器\n   */\n  fromDom(element: HTMLElement): Processor {\n    const processor = new Processor()\n    return processor.dom(element)\n  }\n}\n","import { ref, watch } from 'vue'\nimport { StyleProcessor } from '../utils/style-processor'\nimport type { SectionData } from '../types'\n\n/**\n * Section样式管理 Composable\n */\nexport function useSection() {\n  const currentSection = ref<HTMLElement | null>(null)\n  const currentElement = ref<HTMLElement | null>(null)\n\n  const sectionData = ref<SectionData>({\n    id: '',\n    width: 100,\n    rotate: 0,\n    opacity: 1,\n  })\n\n  const imageData = ref({\n    show: false,\n    element: null as HTMLElement | null,\n    width: 100,\n    opacity: 1,\n  })\n\n  /**\n   * 准备Section样式数据\n   */\n  const prepareSectionStyle = (section: HTMLElement) => {\n    currentSection.value = section\n\n    // 获取样式ID\n    sectionData.value.id = section.getAttribute('data-section-id') || ''\n\n    // 解析样式\n    const processor = StyleProcessor.fromDom(section)\n\n    // 宽度\n    const widthStr = section.style.width || '100%'\n    sectionData.value.width = parseInt(widthStr) || 100\n\n    // 旋转\n    sectionData.value.rotate = processor.get('rotatez', 0)\n\n    // 透明度\n    sectionData.value.opacity = processor.get('opacity', 1)\n  }\n\n  /**\n   * 准备图片样式数据\n   */\n  const prepareImageStyle = (section: HTMLElement, img: HTMLElement) => {\n    imageData.value.element = img\n    imageData.value.show = true\n\n    currentSection.value = section\n\n    const processor = StyleProcessor.fromDom(img)\n\n    // 宽度\n    const widthStr = img.style.width || '100%'\n    imageData.value.width = parseInt(widthStr) || 100\n\n    // 透明度\n    imageData.value.opacity = processor.get('opacity', 1)\n  }\n\n  /**\n   * 清除选中状态\n   */\n  const clearSelection = () => {\n    currentSection.value = null\n    currentElement.value = null\n    imageData.value.show = false\n    imageData.value.element = null\n  }\n\n  // 监听Section宽度变化\n  watch(() => sectionData.value.width, (newWidth) => {\n    if (currentSection.value) {\n      StyleProcessor.fromDom(currentSection.value)\n        .merge('margin', '0 auto')\n        .merge('width', `${newWidth}%`)\n        .toDom()\n        .remove('max-width')\n        .removeDomAttr('width')\n    }\n  })\n\n  // 监听Section旋转变化\n  watch(() => sectionData.value.rotate, (newRotate) => {\n    if (currentSection.value) {\n      StyleProcessor.fromDom(currentSection.value)\n        .merge('rotatez', newRotate)\n        .toDom()\n    }\n  })\n\n  // 监听Section透明度变化\n  watch(() => sectionData.value.opacity, (newOpacity) => {\n    if (currentSection.value) {\n      StyleProcessor.fromDom(currentSection.value)\n        .merge('opacity', newOpacity)\n        .toDom()\n    }\n  })\n\n  // 监听图片宽度变化\n  watch(() => imageData.value.width, (newWidth) => {\n    if (imageData.value.element) {\n      StyleProcessor.fromDom(imageData.value.element)\n        .remove('max-width')\n        .merge('width', `${newWidth}%`)\n        .toDom()\n        .removeDomAttr('width')\n    }\n  })\n\n  // 监听图片透明度变化\n  watch(() => imageData.value.opacity, (newOpacity) => {\n    if (imageData.value.element) {\n      StyleProcessor.fromDom(imageData.value.element)\n        .merge('opacity', newOpacity)\n        .toDom()\n    }\n  })\n\n  return {\n    currentSection,\n    currentElement,\n    sectionData,\n    imageData,\n    prepareSectionStyle,\n    prepareImageStyle,\n    clearSelection\n  }\n}\n","import { Config } from '../utils/config'\n\n/**\n * Section操作 Composable\n */\nexport function useSectionActions() {\n  /**\n   * 执行带撤销/重做的操作\n   */\n  const executeWithUndo = (editor: any, callback: () => void) => {\n    if (!editor) return\n    \n    editor.undoManger.save()\n    callback()\n    editor.undoManger.save()\n    editor.syncCommandState()\n  }\n  \n  /**\n   * 清除Section格式\n   */\n  const clearSectionFormat = (editor: any, section: HTMLElement) => {\n    if (!editor || !section) return\n    \n    executeWithUndo(editor, () => {\n      editor.selection.getRange().selectNode(section).select()\n      editor.execCommand('removeformat')\n      section.className = `${Config.SectionClass} ${Config.SectionActiveClass}`\n    })\n  }\n  \n  /**\n   * 在Section前/后插入空行\n   */\n  const insertSection = (editor: any, section: HTMLElement, position: 'before' | 'after') => {\n    if (!editor || !section) return\n    \n    const newSection = document.createElement('section')\n    newSection.className = Config.SectionClass\n    newSection.setAttribute('data-section-id', '')\n    \n    const p = document.createElement('p')\n    const br = document.createElement('br')\n    p.appendChild(br)\n    newSection.appendChild(p)\n    \n    executeWithUndo(editor, () => {\n      if (position === 'before') {\n        section.parentNode?.insertBefore(newSection, section)\n      } else {\n        section.parentNode?.insertBefore(newSection, section.nextSibling)\n      }\n    })\n    \n    // 设置光标位置\n    editor.selection.getRange().setStart(p, 0).setCursor(false, true)\n  }\n  \n  /**\n   * 选中Section\n   */\n  const selectSection = (editor: any, section: HTMLElement) => {\n    if (!editor || !section) return\n    \n    executeWithUndo(editor, () => {\n      editor.selection.getRange().selectNode(section).select()\n    })\n  }\n  \n  /**\n   * 删除Section\n   */\n  const deleteSection = (editor: any, section: HTMLElement) => {\n    if (!editor || !section) return\n    \n    executeWithUndo(editor, () => {\n      section.remove()\n    })\n  }\n  \n  /**\n   * 上移Section\n   */\n  const moveSectionUp = (editor: any, section: HTMLElement) => {\n    if (!editor || !section) return\n    \n    const prevSection = section.previousElementSibling\n    if (prevSection) {\n      executeWithUndo(editor, () => {\n        section.parentNode?.insertBefore(section, prevSection)\n      })\n    }\n  }\n  \n  /**\n   * 下移Section\n   */\n  const moveSectionDown = (editor: any, section: HTMLElement) => {\n    if (!editor || !section) return\n    \n    const nextSection = section.nextElementSibling\n    if (nextSection) {\n      executeWithUndo(editor, () => {\n        section.parentNode?.insertBefore(section, nextSection.nextSibling)\n      })\n    }\n  }\n  \n  return {\n    clearSectionFormat,\n    insertSection,\n    selectSection,\n    deleteSection,\n    moveSectionUp,\n    moveSectionDown\n  }\n}\n","<template>\n  <div class=\"upd-material-panel\">\n    <!-- 素材内容 -->\n    <div class=\"upd-material-body\">\n      <div class=\"upd-material-item\">\n        <!-- 头部：分类和过滤 -->\n        <div class=\"upd-material-item__head\">\n          <!-- 分类 -->\n          <div class=\"upd-category\">\n            <div class=\"upd-category__item\">\n              <div\n                  class=\"upd-category__title\"\n                  :class=\"{ 'upd-category__title--active': currentCategory === 0 }\"\n                  @click=\"$emit('change-category', 0)\"\n              >\n                全部\n              </div>\n            </div>\n            <div\n                v-for=\"cat in categories\"\n                :key=\"cat.id\"\n                class=\"upd-category__item\"\n            >\n              <div\n                  class=\"upd-category__title\"\n                  :class=\"{\n                  'upd-category__title--active':\n                    cat.id === currentCategory ||\n                    (cat._child && cat._child.some(c => c.id === currentCategory))\n                }\"\n                  @click=\"$emit('change-category', cat.id)\"\n              >\n                {{ cat.title }}\n              </div>\n              <!-- 子分类 -->\n              <div v-if=\"cat._child && cat._child.length\" class=\"upd-category__children\">\n                <div\n                    v-for=\"child in cat._child\"\n                    :key=\"child.id\"\n                    class=\"upd-category__child-title\"\n                    :class=\"{ 'upd-category__child-title--active': child.id === currentCategory }\"\n                    @click.stop=\"$emit('change-category', child.id)\"\n                >\n                  {{ child.title }}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- 过滤和搜索 -->\n          <div class=\"upd-filter\">\n            <div class=\"upd-filter__text\">\n              <!-- 可以添加过滤选项 -->\n            </div>\n            <div class=\"upd-filter__search\">\n              <input\n                  v-model=\"searchKeyword\"\n                  type=\"text\"\n                  placeholder=\"样式ID或关键词\"\n                  @keyup.enter=\"handleSearch\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <!-- 素材列表 -->\n        <div class=\"upd-material-item__body\">\n          <div v-if=\"loading\" class=\"upd-loading\">\n            加载中...\n          </div>\n          <div v-else class=\"upd-material-list\">\n            <div\n                v-for=\"item in materials\"\n                :key=\"item.id\"\n                class=\"upd-material-list__item\"\n                @click=\"$emit('select', item)\"\n            >\n              <div class=\"upd-material-list__preview\" v-html=\"item.html\"></div>\n              <div class=\"upd-material-list__info\">\n                <span class=\"upd-material-list__title\">{{ item.title }}</span>\n                <span class=\"upd-material-list__id\">ID: {{ item.id }}</span>\n              </div>\n            </div>\n\n            <!-- Loading more indicator -->\n            <div v-if=\"loadingMore\" class=\"upd-loading-more\">\n              加载更多...\n            </div>\n\n            <!-- No more data indicator -->\n            <div v-else-if=\"!hasMore && materials.length > 0\" class=\"upd-no-more\">\n              没有更多数据了\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {ref, onMounted, onUnmounted} from 'vue'\nimport type {MaterialCategory, MaterialItem} from '../types'\n\ninterface Props {\n  categories: MaterialCategory[]\n  materials: MaterialItem[]\n  total: number\n  currentCategory: number | string\n  loading?: boolean\n  loadingMore?: boolean\n  hasMore?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  loading: false,\n  loadingMore: false,\n  hasMore: true\n})\n\nconst emit = defineEmits<{\n  select: [item: MaterialItem]\n  'change-category': [categoryId: number | string]\n  search: [keyword: string]\n  'load-more': []\n}>()\n\nconst searchKeyword = ref('')\nconst scrollContainer = ref<HTMLElement | null>(null)\n\nconst handleSearch = () => {\n  emit('search', searchKeyword.value)\n}\n\n/**\n * Handle scroll event to trigger load more\n */\nconst handleScroll = () => {\n  if (!scrollContainer.value || props.loading || props.loadingMore || !props.hasMore) {\n    return\n  }\n\n  const container = scrollContainer.value\n  const scrollTop = container.scrollTop\n  const scrollHeight = container.scrollHeight\n  const clientHeight = container.clientHeight\n\n  // Trigger load more when scrolled to bottom (with 50px threshold)\n  const threshold = 50\n  if (scrollTop + clientHeight >= scrollHeight - threshold) {\n    emit('load-more')\n  }\n}\n\nonMounted(() => {\n  scrollContainer.value = document.querySelector('.upd-material-item')\n  if (scrollContainer.value) {\n    scrollContainer.value.addEventListener('scroll', handleScroll)\n  }\n})\n\nonUnmounted(() => {\n  if (scrollContainer.value) {\n    scrollContainer.value.removeEventListener('scroll', handleScroll)\n  }\n})\n</script>\n\n<style scoped lang=\"scss\">\n.upd-material-panel {\n  display: flex;\n  width: 100%;\n  height: 100%;\n}\n\n.upd-loading {\n  text-align: center;\n  padding: 2rem;\n  color: var(--upd-text-color);\n}\n\n.upd-loading-more {\n  text-align: center;\n  padding: 1rem;\n  color: var(--upd-text-color);\n  font-size: var(--upd-font-size-small);\n}\n\n.upd-no-more {\n  text-align: center;\n  padding: 1rem;\n  color: var(--upd-text-secondary);\n  font-size: var(--upd-font-size-small);\n}\n\n.upd-material-list {\n  // Use vertical list layout instead of grid\n  padding: 0;\n\n  &__item {\n    padding: 0.5rem 0.5rem 1.5rem 0.5rem;\n    border-bottom: 1px solid var(--upd-border-color);\n    position: relative;\n    cursor: pointer;\n    overflow: visible;\n    min-height: 2rem;\n    transition: all 0.2s;\n    background: var(--upd-background-color);\n\n    &:hover {\n      box-shadow: 0 0 10px 2px rgba(234, 234, 234, 0.8);\n      z-index: 2;\n    }\n  }\n\n  &__preview {\n    width: 100%;\n    overflow: hidden;\n\n    // No scaling, use max-width to constrain content\n    :deep(*) {\n      max-width: 100%;\n    }\n  }\n\n  &__info {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    padding: 5px;\n    background: rgba(0, 0, 0, 0.2);\n    color: #fff;\n    font-size: 11px;\n  }\n\n  &__title {\n    display: inline;\n    font-size: 11px;\n    color: #fff;\n    margin-right: 0.5rem;\n  }\n\n  &__id {\n    display: inline;\n    font-size: 11px;\n    color: #fff;\n  }\n}\n\n.upd-filter__search input {\n  width: 100%;\n  padding: 0.25rem 0.5rem;\n  border: 1px solid var(--upd-border-color);\n  border-radius: 3px;\n  font-size: var(--upd-font-size-small);\n\n  &:focus {\n    outline: none;\n    border-color: var(--upd-primary-color);\n  }\n}\n</style>\n","<template>\n  <svg\n    :width=\"size\"\n    :height=\"size\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    :stroke=\"strokeColor\"\n    stroke-width=\"2\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n    class=\"icon\"\n  >\n    <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n    <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n  </svg>\n</template>\n\n<script setup lang=\"ts\">\ninterface Props {\n  size?: number\n  strokeColor?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  size: 24,\n  strokeColor: 'currentColor'\n})\n</script>\n\n<style scoped>\n.icon {\n  display: inline-block;\n  flex-shrink: 0;\n}\n</style>\n","<template>\n  <div\n    class=\"upd-section-tools\"\n    :style=\"{\n      left: position.left + 'px',\n      top: position.top + 'px'\n    }\"\n  >\n    <!-- 关闭按钮 -->\n    <div class=\"upd-section-tools__close\" @click=\"$emit('close')\">\n      <IconClose :size=\"16\" stroke-color=\"#fff\" />\n    </div>\n\n    <!-- 图片工具面板 -->\n    <div v-if=\"imageData.show\" class=\"upd-section-tools__panel\">\n      <div class=\"upd-section-tools__head\">\n        <span class=\"upd-section-tools__title\">图片</span>\n      </div>\n      <div class=\"upd-section-tools__body\">\n        <div class=\"upd-section-tools__actions\">\n          <div class=\"upd-section-tools__action-btn\" @click=\"$emit('image-action', 'change')\">\n            换图\n          </div>\n        </div>\n        <div class=\"upd-section-tools__line\">\n          <div class=\"upd-section-tools__label\">宽度%</div>\n          <div class=\"upd-section-tools__field\">\n            <input\n              v-model.number=\"imageData.width\"\n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              class=\"upd-slider\"\n            />\n            <input\n              v-model.number=\"imageData.width\"\n              type=\"number\"\n              min=\"0\"\n              max=\"100\"\n              class=\"upd-input-number\"\n            />\n          </div>\n        </div>\n        <div class=\"upd-section-tools__line\">\n          <div class=\"upd-section-tools__label\">透明度</div>\n          <div class=\"upd-section-tools__field\">\n            <input\n              v-model.number=\"imageData.opacity\"\n              type=\"range\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.01\"\n              class=\"upd-slider\"\n            />\n            <input\n              v-model.number=\"imageData.opacity\"\n              type=\"number\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.01\"\n              class=\"upd-input-number\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Section工具面板 -->\n    <div class=\"upd-section-tools__panel\">\n      <div class=\"upd-section-tools__head\">\n        <span class=\"upd-section-tools__title\">内容块</span>\n        <span class=\"upd-section-tools__desc\">\n          样式ID {{ sectionData.id || '-' }}\n        </span>\n      </div>\n      <div class=\"upd-section-tools__body\">\n        <div class=\"upd-section-tools__actions\">\n          <div class=\"upd-section-tools__action-btn\" @click=\"$emit('action', 'clearFormat')\">\n            清除样式\n          </div>\n          <div class=\"upd-section-tools__action-btn\" @click=\"$emit('action', 'newSectionBefore')\">\n            前空行\n          </div>\n          <div class=\"upd-section-tools__action-btn\" @click=\"$emit('action', 'newSectionAfter')\">\n            后空行\n          </div>\n          <div class=\"upd-section-tools__action-btn\" @click=\"$emit('action', 'select')\">\n            选中\n          </div>\n          <div class=\"upd-section-tools__action-btn\" @click=\"$emit('action', 'delete')\">\n            删除\n          </div>\n          <div class=\"upd-section-tools__action-btn\" @click=\"$emit('action', 'moveUp')\">\n            上移\n          </div>\n          <div class=\"upd-section-tools__action-btn\" @click=\"$emit('action', 'moveDown')\">\n            下移\n          </div>\n        </div>\n\n        <div class=\"upd-section-tools__line\">\n          <div class=\"upd-section-tools__label\">宽度%</div>\n          <div class=\"upd-section-tools__field\">\n            <input\n              v-model.number=\"sectionData.width\"\n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              class=\"upd-slider\"\n            />\n            <input\n              v-model.number=\"sectionData.width\"\n              type=\"number\"\n              min=\"0\"\n              max=\"100\"\n              class=\"upd-input-number\"\n            />\n          </div>\n        </div>\n\n        <div class=\"upd-section-tools__line\">\n          <div class=\"upd-section-tools__label\">旋转角度</div>\n          <div class=\"upd-section-tools__field\">\n            <input\n              v-model.number=\"sectionData.rotate\"\n              type=\"range\"\n              min=\"-180\"\n              max=\"180\"\n              class=\"upd-slider\"\n            />\n            <input\n              v-model.number=\"sectionData.rotate\"\n              type=\"number\"\n              min=\"-180\"\n              max=\"180\"\n              class=\"upd-input-number\"\n            />\n          </div>\n        </div>\n\n        <div class=\"upd-section-tools__line\">\n          <div class=\"upd-section-tools__label\">透明度</div>\n          <div class=\"upd-section-tools__field\">\n            <input\n              v-model.number=\"sectionData.opacity\"\n              type=\"range\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.01\"\n              class=\"upd-slider\"\n            />\n            <input\n              v-model.number=\"sectionData.opacity\"\n              type=\"number\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.01\"\n              class=\"upd-input-number\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport IconClose from './icons/IconClose.vue'\nimport type { SectionData } from '../types'\n\ninterface Props {\n  sectionData: SectionData\n  imageData: {\n    show: boolean\n    width: number\n    opacity: number\n  }\n  position: {\n    left: number\n    top: number\n  }\n}\n\ndefineProps<Props>()\n\ndefineEmits<{\n  action: [action: string]\n  'image-action': [action: string]\n  close: []\n}>()\n</script>\n\n<style scoped lang=\"scss\">\n.upd-slider {\n  width: calc(100% - 80px);\n  height: 4px;\n  border-radius: 2px;\n  background: #ddd;\n  outline: none;\n  vertical-align: middle;\n\n  &::-webkit-slider-thumb {\n    width: 12px;\n    height: 12px;\n    border-radius: 50%;\n    background: #ffb800;\n    cursor: pointer;\n  }\n}\n\n.upd-input-number {\n  width: 70px;\n  height: 20px;\n  line-height: 20px;\n  padding: 0 5px;\n  border: 1px solid #999;\n  border-radius: 3px;\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  font-size: 12px;\n  margin-left: 5px;\n  vertical-align: middle;\n\n  &:focus {\n    outline: none;\n    border-color: #ffb800;\n  }\n}\n</style>\n","<template>\n  <svg\n    :width=\"size\"\n    :height=\"size\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    :stroke=\"strokeColor\"\n    stroke-width=\"2\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n    class=\"icon\"\n  >\n    <polyline points=\"20 6 9 17 4 12\"></polyline>\n  </svg>\n</template>\n\n<script setup lang=\"ts\">\ninterface Props {\n  size?: number\n  strokeColor?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  size: 24,\n  strokeColor: 'currentColor'\n})\n</script>\n\n<style scoped>\n.icon {\n  display: inline-block;\n  flex-shrink: 0;\n}\n</style>\n","<template>\n  <div class=\"ueditor-plus-designer\">\n    <div class=\"ueditor-plus-designer__body\">\n      <!-- 素材面板 -->\n      <div v-if=\"showMaterial\" class=\"ueditor-plus-designer__material\">\n        <MaterialPanel\n            :categories=\"categories\"\n            :materials=\"materials\"\n            :total=\"total\"\n            :current-category=\"currentCategory\"\n            :loading=\"loading\"\n            :loading-more=\"loadingMore\"\n            :has-more=\"hasMore\"\n            @select=\"handleMaterialSelect\"\n            @change-category=\"changeCategory\"\n            @search=\"handleSearch\"\n            @load-more=\"loadMore\"\n        />\n      </div>\n\n      <!-- 编辑器区域 -->\n      <div class=\"ueditor-plus-designer__editor\">\n        <div class=\"upd-editor-instance\">\n          <div :id=\"editorId\" style=\"height:100%;\"></div>\n        </div>\n\n        <!-- 右侧工具栏 -->\n        <div v-if=\"isIframe\" class=\"upd-toolbar\">\n          <a class=\"upd-toolbar__item\" href=\"javascript:;\" @click=\"handleConfirm\">\n            <IconCheck :size=\"16\"/>\n            完成\n          </a>\n        </div>\n      </div>\n    </div>\n\n    <!-- Section工具面板 -->\n    <SectionTools\n        v-if=\"showSectionTools\"\n        :section-data=\"sectionData\"\n        :image-data=\"imageData\"\n        :position=\"toolsPosition\"\n        @action=\"handleSectionAction\"\n        @image-action=\"handleImageAction\"\n        @close=\"closeSectionTools\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {ref, computed, onMounted, onUnmounted} from 'vue'\nimport {DesignerCore} from '../core/DesignerCore'\nimport {useMaterial} from '../composables/useMaterial'\nimport {useSection} from '../composables/useSection'\nimport {useSectionActions} from '../composables/useSectionActions'\nimport {Config} from '../utils/config'\nimport MaterialPanel from './MaterialPanel.vue'\nimport SectionTools from './SectionTools.vue'\nimport IconCheck from './icons/IconCheck.vue'\nimport type {DesignerConfig, MaterialItem} from '../types'\nimport '../styles/index.scss'\n\ninterface Props {\n  config?: DesignerConfig\n  isIframe?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  config: () => ({}),\n  isIframe: false\n})\n\nconst emit = defineEmits<{\n  ready: []\n  change: [content: string]\n  confirm: [content: string]\n}>()\n\n// 编辑器核心实例\nconst designerCore = ref<DesignerCore | null>(null)\nconst editorId = ref(`upd_${Date.now()}`)\nconst showMaterial = ref(true)\nconst showSectionTools = ref(false)\nconst toolsPosition = ref({left: 0, top: 0})\n\n// 使用素材管理\nconst {\n  categories,\n  materials,\n  total,\n  loading,\n  loadingMore,\n  currentCategory,\n  hasMore,\n  changeCategory,\n  search: searchMaterials,\n  loadMore\n} = useMaterial(props.config)\n\n// 使用Section管理\nconst {\n  currentSection,\n  sectionData,\n  imageData,\n  prepareSectionStyle,\n  prepareImageStyle,\n  clearSelection\n} = useSection()\n\n// 使用Section操作\nconst {\n  clearSectionFormat,\n  insertSection,\n  selectSection,\n  deleteSection,\n  moveSectionUp,\n  moveSectionDown\n} = useSectionActions()\n\n/**\n * 初始化编辑器\n */\nonMounted(async () => {\n  const container = document.getElementById(editorId.value)\n  if (!container) return\n\n  designerCore.value = new DesignerCore({\n    ...props.config,\n    container\n  })\n\n  try {\n    await designerCore.value.init()\n\n    // 监听编辑器事件\n    designerCore.value.on('ready', () => {\n      emit('ready')\n      handleWindowResize();\n    })\n\n    designerCore.value.on('change', (content: string) => {\n      emit('change', content)\n    })\n\n    // 监听Section点击\n    designerCore.value.on('section-click', handleSectionClick)\n\n    // 设置窗口resize监听，更新工具面板位置\n    window.addEventListener('resize', handleWindowResize)\n  } catch (error) {\n    console.error('Failed to initialize designer:', error)\n  }\n})\n\n/**\n * 清理\n */\nonUnmounted(() => {\n  window.removeEventListener('resize', handleWindowResize)\n  designerCore.value?.destroy()\n})\n\n/**\n * 处理素材选择\n */\nconst handleMaterialSelect = (item: MaterialItem) => {\n  if (designerCore.value) {\n    designerCore.value.insertSection(item.html, {id: item.id})\n  }\n}\n\n/**\n * 处理搜索\n */\nconst handleSearch = (keyword: string) => {\n  searchMaterials(keyword)\n}\n\n/**\n * 处理Section点击\n */\nconst handleSectionClick = ({section, element, image}: any) => {\n  currentSection.value = section\n\n  // 准备Section样式\n  prepareSectionStyle(section)\n\n  // 检查是否点击图片\n  if (image) {\n    prepareImageStyle(section, image)\n  } else {\n    imageData.value.show = false\n  }\n\n  // 显示工具面板并计算位置\n  showSectionTools.value = true\n  updateToolsPosition(section)\n}\n\n/**\n * 更新工具面板位置\n */\nconst updateToolsPosition = (section: HTMLElement) => {\n  if (!designerCore.value) return\n\n  const editor = designerCore.value.getEditor()\n  if (!editor) return\n\n  // 获取编辑器 iframe 和文档\n  const editorEl = document.querySelector(`#${editorId.value}`)\n  if (!editorEl) return\n\n  const iframe = editorEl.querySelector('.edui-editor-iframeholder > iframe') as HTMLIFrameElement\n  if (!iframe) return\n\n  const editorDocument = editor.document\n\n  // 计算Section在视口中的位置\n  const viewport = getSectionViewport(section, iframe, editorDocument)\n\n  // 工具面板尺寸（估算）\n  const toolsWidth = 320\n  const toolsHeight = 350\n\n  // 水平居中\n  let toolsLeft = viewport.left + (viewport.width - toolsWidth) / 2 - viewport.relativeLeft\n  toolsLeft = Math.max(0, Math.min(toolsLeft, viewport.containerWidth - toolsWidth))\n\n  // 智能决定显示在上方还是下方\n  let toolsTop\n  if (viewport.spaceTop > viewport.spaceBottom && viewport.spaceTop > toolsHeight) {\n    // 显示在上方\n    toolsTop = viewport.top - toolsHeight - viewport.relativeTop\n    toolsTop = Math.max(0, toolsTop)\n  } else {\n    // 显示在下方\n    toolsTop = viewport.top + viewport.height - viewport.relativeTop\n    const maxTop = viewport.top + viewport.height + viewport.spaceBottom - viewport.relativeTop - toolsHeight\n    toolsTop = Math.min(toolsTop, maxTop)\n  }\n\n  toolsPosition.value = {\n    left: toolsLeft,\n    top: toolsTop\n  }\n}\n\n/**\n * 获取Section在视口中的位置信息\n */\nconst getSectionViewport = (section: HTMLElement, iframe: HTMLIFrameElement, editorDocument: Document) => {\n  const containerEl = document.querySelector('.ueditor-plus-designer')\n  if (!containerEl) {\n    return {\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0,\n      containerWidth: 0,\n      containerHeight: 0,\n      spaceTop: 0,\n      spaceBottom: 0,\n      spaceLeft: 0,\n      spaceRight: 0,\n      relativeLeft: 0,\n      relativeTop: 0\n    }\n  }\n\n  const iframeRect = iframe.getBoundingClientRect()\n  const sectionRect = section.getBoundingClientRect()\n  const containerRect = containerEl.getBoundingClientRect()\n\n  // 计算Section相对于iframe的位置\n  const viewport = {\n    left: iframeRect.left + sectionRect.left - editorDocument.documentElement.scrollLeft,\n    top: iframeRect.top + sectionRect.top - editorDocument.documentElement.scrollTop,\n    width: sectionRect.width,\n    height: sectionRect.height,\n    containerWidth: containerRect.width,\n    containerHeight: containerRect.height,\n    spaceTop: 0,\n    spaceBottom: 0,\n    spaceLeft: 0,\n    spaceRight: 0,\n    relativeLeft: containerRect.left,\n    relativeTop: containerRect.top\n  }\n\n  // 计算可用空间\n  viewport.spaceTop = viewport.top - containerRect.top\n  viewport.spaceLeft = viewport.left - containerRect.left\n  viewport.spaceBottom = containerRect.top + containerRect.height - (viewport.top + viewport.height)\n  viewport.spaceRight = containerRect.left + containerRect.width - (viewport.left + viewport.width)\n\n  return viewport\n}\n\n/**\n * 处理窗口resize事件\n */\nconst handleWindowResize = () => {\n  // 如果工具面板正在显示且有当前section，更新工具面板位置\n  if (showSectionTools.value && currentSection.value) {\n    updateToolsPosition(currentSection.value)\n  }\n}\n\n/**\n * 关闭Section工具\n */\nconst closeSectionTools = () => {\n  // 移除激活状态\n  if (currentSection.value) {\n    currentSection.value.classList.remove(Config.SectionActiveClass)\n  }\n\n  showSectionTools.value = false\n  clearSelection()\n}\n\n/**\n * 处理Section操作\n */\nconst handleSectionAction = (action: string) => {\n  if (!designerCore.value || !currentSection.value) return\n\n  const editor = designerCore.value.getEditor()\n  if (!editor) return\n\n  switch (action) {\n    case 'clearFormat':\n      clearSectionFormat(editor, currentSection.value)\n      closeSectionTools()\n      break\n    case 'newSectionBefore':\n      insertSection(editor, currentSection.value, 'before')\n      closeSectionTools()\n      break\n    case 'newSectionAfter':\n      insertSection(editor, currentSection.value, 'after')\n      closeSectionTools()\n      break\n    case 'select':\n      selectSection(editor, currentSection.value)\n      closeSectionTools()\n      break\n    case 'delete':\n      deleteSection(editor, currentSection.value)\n      closeSectionTools()\n      break\n    case 'moveUp':\n      moveSectionUp(editor, currentSection.value)\n      closeSectionTools()\n      break\n    case 'moveDown':\n      moveSectionDown(editor, currentSection.value)\n      closeSectionTools()\n      break\n  }\n}\n\n/**\n * 处理图片操作\n */\nconst handleImageAction = (action: string) => {\n  // Image action handling removed\n  // Users should implement custom logic if needed\n  console.log('Image action:', action)\n}\n\n/**\n * 确认（用于iframe模式）\n */\nconst handleConfirm = () => {\n  if (designerCore.value) {\n    const content = designerCore.value.getContent()\n    emit('confirm', content)\n  }\n}\n\n/**\n * 获取内容（暴露给父组件）\n */\nconst getContent = () => {\n  return designerCore.value?.getContent() || ''\n}\n\n/**\n * 设置内容（暴露给父组件）\n */\nconst setContent = (content: string) => {\n  designerCore.value?.setContent(content)\n}\n\n// 暴露方法给父组件\ndefineExpose({\n  getContent,\n  setContent\n})\n</script>\n"],"names":["API_BASE_URL","fetchCategories","response","result","_a","convertCategories","error","raw","item","fetchMaterials","params","requestBody","convertMaterials","defaultCategoryLoader","defaultStyleLoader","materialsData","Config","DefaultUEditorPlusToolbars","isLoading","isLoaded","loadCallbacks","loadUEditor","ueditorPath","resolve","reject","basePath","configScript","mainScript","cb","DefaultIframeStyles","DesignerCore","config","__publicField","ueditorConfig","categoryLoader","styleLoader","UE","editorContainer","editorConfig","content","editor","_uiName","_t","evt","el","section","s","clickedImage","closeNode","t","subSection","html","options","sectionId","sectionHtml","containerHeight","toolbarElement","toolbarHeight","availableHeight","resizeTimer","event","callback","handlers","index","args","handler","useMaterial","categories","ref","materials","total","loading","loadingMore","loadingCategories","currentCategory","keywords","currentPage","pageSize","hasMore","getCategoryLoader","getStyleLoader","loadCategories","loader","loadMaterials","append","data","totalPages","loadMore","changeCategory","categoryId","search","keyword","onMounted","_Processor","element","styleAttr","pairs","pair","key","value","attrName","foundKeys","prefix","prefixedKey","valueCb","keys","k","oldValue","transform","v","defaultValue","rotateZ","match","styleArray","Processor","StyleProcessor","useSection","currentSection","currentElement","sectionData","imageData","prepareSectionStyle","processor","widthStr","prepareImageStyle","img","clearSelection","watch","newWidth","newRotate","newOpacity","useSectionActions","executeWithUndo","position","newSection","p","br","_b","prevSection","nextSection","props","__props","emit","__emit","searchKeyword","scrollContainer","handleSearch","handleScroll","container","scrollTop","scrollHeight","clientHeight","onUnmounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_normalizeClass","$emit","_Fragment","_renderList","cat","c","$event","_toDisplayString","_hoisted_7","_hoisted_8","child","_withModifiers","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_normalizeStyle","_createVNode","IconClose","_cache","_hoisted_15","_hoisted_16","designerCore","editorId","showMaterial","showSectionTools","toolsPosition","searchMaterials","clearSectionFormat","insertSection","selectSection","deleteSection","moveSectionUp","moveSectionDown","handleWindowResize","handleSectionClick","handleMaterialSelect","image","updateToolsPosition","editorEl","iframe","editorDocument","viewport","getSectionViewport","toolsWidth","toolsHeight","toolsLeft","toolsTop","maxTop","containerEl","iframeRect","sectionRect","containerRect","closeSectionTools","handleSectionAction","action","handleImageAction","handleConfirm","__expose","MaterialPanel","_unref","IconCheck","_createBlock","SectionTools"],"mappings":"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"}